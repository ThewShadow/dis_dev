{% extends 'main/base_report.html' %}
{% load i18n static %}

{% block title %}
<title>{% trans 'Agents Statistics' %}</title>
{% endblock %}

{% block report_name %}
  <h1>{% trans 'Agents Statistics' %}</h1>
{% endblock %}

{% block content_table %}
    {% regroup agent_list by username as agent_list_regroup %}
    <div class="table">
      <ul class="table__row table__row-head">
        <li class="table__agent">
          <p>Username</p>
        </li>
        <li class="table__agent">
          <p>Email</p>
        </li>
        <li class="table__referrals-count">
          <p>Invite referrals</p>
        </li>
      </ul>
      {% regroup page_obj by username as agent_list_regroup %}

      {% for username in agent_list_regroup %}
        <ul class="table__row">
          <li class="table__agent">
            <p>Agent</p>
            <span>{{ username.grouper }}</span>
          </li>
           <li class="table__agent">
            <p>Referrals count</p>
            <span>{{ username.list.0.email }}</span>
          </li>
          <li class="table__referrals-count">
            <p>Invite referrals</p>
            <span>{{ username.list|length }}</span>
          </li>
        </ul>
      {% endfor %}
    </div>
{% endblock %}
